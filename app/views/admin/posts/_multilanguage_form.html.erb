<ul class="tabs" data-tab>
  <% Setting.selected_languages.each_with_index do |l,index| %>
      <li id="lang-tab" data-lang=<%= l.second %> class="tab-title <%= l.second == I18n.locale.to_s ? "active" : ""%>"><a href="#langtab<%= index %>"><%= l.first %></a></li>
  <% end %>
</ul>

<%= form_for([:admin,@admin_post]) do |f| %>
  <% if @admin_post.errors.any? %>
    <div id="error_explanation">
      <h4><%= t 'common.error_save', count: @admin_post.errors.count, model: Post.model_name.human %></h4>

      <ul id="post-error-message">
        <% @admin_post.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div class="tabs-content"> 
    <% Setting.selected_languages.each_with_index do |l, index| %>
      
      <%= content_tag :div, class: "content "+ (l.second == I18n.locale.to_s ? "active" : ""), id: "langtab"+index.to_s do %> 
      
        <% title_locale = ("title_" + l.second).to_sym %>
        <% content_locale = ("content_" + l.second).to_sym %>
        <!-- Name div -->
        <%= content_tag :div, class: 'field', id: "post-title-"+l.second do %>
          <%= f.label t('posts.attributes.title', locale: l.second.to_sym) %>
          <%= f.text_field title_locale %>
        <% end %>
        <!-- Content div -->
        <%= content_tag :div, class: 'field', id: "post-body-"+l.second do %>
          <%= f.label t('posts.attributes.content', locale: l.second.to_sym) %>
          <%= f.text_area content_locale, class: "ckeditor", input_html: { ckeditor: {toolbar: 'Full'} } %>
        <% end %>
        <br>
        <!-- Attachment -->
        <%= content_tag :div, class: 'field', id: 'post-attachment-'+l.second do %>
          <button class="attachment-btn" id="insert-attachment-<%=l.second%>"><%= t('common.insert_attachment') %></button>
        <% end %>
      <% end %>

    <% end %>
    
    <div class="actions">
      <%= f.submit class: "button right" %>
    </div>
  </div>
<% end %>

<div id="dialog" title="<%= t('common.insert_attachment') %>" style="display:none">
  <p class="validateTips"><%= t('common.select_attachment') %>.</p>
  <ol id="selectable">
    <% @attachments.each do |attachment| %>
      <li class="ui-widget-content" data-attachment-link='"<%= download_attachment_url(attachment)%>"' data-attachment-type="<%= attachment.file_content_type %>" ><%= attachment.file_file_name %></li>
    <% end %>
  </ol>
</div>
<!-- Joyride instructions -->
<div id="posts-form" class="joyride-content">
  <ol id="joyride-defs" class="joyride-list" data-joyride>
    <li id="title" data-text=<%= t 'joyride.next' %> data-options="tip_location: top; prev_button: false">
      <p><%= t 'joyride.post.title' %></p>
    </li>  
    <li id="body" data-text=<%= t 'joyride.next' %> data-prev-text=<%= t 'joyride.prev' %> data-options="tip_location: top;">
      <p><%= t 'joyride.post.body' %></p>
    </li>
    <li id="attachment" data-text="Ok" data-prev-text=<%= t 'joyride.prev' %> data-options="tip_location: top;">
      <p><%= t 'joyride.post.attachments' %></p>
    </li> 
  </ol>
</div>